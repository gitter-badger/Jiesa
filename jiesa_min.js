// Jiesa v 0.0.5a
(function(n,w){var x=document||{},k=x.documentElement||{},p=k.addEventListener,q=function(a){return"string"===typeof a},t=function(a){return"function"===typeof a},y=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},l={},z=k.matches||k.webkitMatchesSelector||k.mozMatchesSelector||k.oMatchesSelector||k.msMatchesSelector,A=/^[^{]+\{\s*\[native \w/.test(z),C=function(a,b){return q(a)?function(e){var c,d,g,f,h;for(A||(g=(b||e.ownerDocument).querySelectorAll(a));e&&
1===e.nodeType;e=e.parentNode){if(A)d=z.call(e,a);else for(f=0,h=g.length;f<h;)if(c=g[f++],c===e)return c;if(d||!b||e===b)break}return d&&e}:null},D=function(a,b,e,c,d,g){if("number"===typeof a)return(e=b["[[__node__]]"])?e[a]:void 0;if(!p){var f=c.ownerDocument.documentElement;if("rightClick"===a)return 3===b.keyCode||2===b.button;if("which"===a)return b.keyCode;if("button"===a)return a=b.button,a&1?1:a&2?3:a&4?2:0;if("pageX"===a)return b.clientX+f.scrollLeft-f.clientLeft;if("pageY"===a)return b.clientY+
f.scrollTop-f.clientTop;if("preventDefault"===a)return function(){return b.returnValue=!1};if("stopPropagation"===a)return function(){return b.cancelBubble=!0}}if("type"===a)return e;if("defaultPrevented"===a)return"defaultPrevented"in b?b.defaultPrevented:!1===b.returnValue;if("target"===a)return d;if("currentTarget"===a)return g;if("relatedTarget"===a)return b.relatedTarget||b[(b.toElement===c?"from":"to")+"Element"];var h=b[a];return t(h)?function(){return h.apply(b,arguments)}:h},E=function(a,
b,e,c){q(b)&&(b=a[b]);try{return b.call(a,e,c)}catch(d){return n.setTimeout(function(){throw d;},1),!1}},u=function(a,b,e,c,d,g){var f=C(b,d),h=l[a],m=function(b){b=b||((d.ownerDocument||d.document||d).parentWindow||n).event;if(u.skip!==a&&("ie8Custom"!==m._type||b.srcUrn===a)){var h=b.target||b.srcElement||d.ownerDocument.documentElement,l=!f||1!==h.nodeType||!0===h.disabled&&"click"===event.type?d:f(h),k=c||[];l&&(1===g&&B(d,a,e),k=c?k.map(function(c){return D(c,b,a,d,h,l)}):Array.prototype.slice.call(b["[[__node__]]"]||
[0],1),a&&!1===e.apply(d,k)&&(p?b.preventDefault():b.returnValue=!1))}};h&&(m=h(m,a)||m);p||"on"+(m._type||a)in d||(m._type="ie8Custom");m.type=a;m.callback=e;m.selector=b;return m},r=function(a,b,e,c,d,g){if(3!==a.nodeType&&8!==a.nodeType&&b)if(a["[[__event__]]"]||(a["[[__event__]]"]=[]),"string"===typeof b){t(c)&&(d=c,q(e)?c=null:(c=e,e=null));t(e)&&(d=e,c=e=null);if(!t(d))return!1;var f=u(b,e,d,c,a,g);f&&(p?a.addEventListener(f._type||b,f,!!f.capture):a.attachEvent("on"+(f._type||b),f));a["[[__event__]]"].push(f)}else null!==
b&&"object"===typeof b&&(y(b)?b.forEach(function(b){g?r(a,b,e,c,d,1):r(a,b,e,c,d)}):(c===w&&y(e)&&(c=e,e=void 0),Object.keys(b).forEach(function(d){g?r(a,d,e,c,b[d],1):r(a,d,e,c,b[d])})))},B=function(a,b,e,c){if(a!==w&&a["[[__event__]]"]&&q(b))return void 0===c&&void 0!==e&&(c=e,e=void 0),a["[[__event__]]"].filter(function(d){var g=b!==d.type;if(g=(g=g||e&&e!==d.selector)||c&&c!==d.callback)return!0;b=d._type||d.type;p?a.removeEventListener(b,d,!!d.capture):a.detachEvent("on"+b,d)}),this},F=function(a,
b,e){if(!a||3!==a.nodeType&&8!==a.nodeType){var c,d;if(q(b))c=l[b],d={},c&&(d=c(d)||d),d=d._type||b;else return!1;p?(~b.indexOf(":")?(c=new CustomEvent(d,{detail:e,bubbles:!0}),c["[[__node__]]"]=arguments):(c=a.ownerDocument.createEvent("HTMLEvents"),c["[[__node__]]"]=arguments,c.initEvent(d,!0,!0)),c=a.dispatchEvent(c)):(c=a.ownerDocument.createEventObject(),c["[[__node__]]"]=arguments,"on"+d in a||(d="ie8Custom"),"ie8Custom"===d&&(c.srcUrn=b),a.fireEvent("on"+d,c),c=!1!==c.returnValue);c&&a[b]&&
(u.skip=b,E(a,b),u.skip=null);return c}};"onfocusin"in k?(l.focus=function(a){a._type="focusin"},l.blur=function(a){a._type="focusout"}):l.focus=l.blur=function(a){a.capture=!0};x.createElement("input").validity&&(l.invalid=function(a){a.capture=!0});var G=n.Jiesa,v={on:function(a,b,e,c,d,g){a=a.length?a:[a];a.forEach(function(a){r(a,b,e,c,d,g)})},once:function(a,b,e,c,d){return this.on(a,b,e,c,d,1)},off:function(a,b,e,c){a=a.length?a:[a];a.forEach(function(a){B(a,b,e,c)})},fire:function(a,b,e){a=
a.length?a[0]:a;return F(a,b,e)},eventHooks:l,noConflict:function(){n.Jiesa===v&&(n.Jiesa=G);return v}};n.Jiesa=v})(window);